<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>信用卡權益管理員 - V1.3.3</title>
    
    <!-- PWA & Icons -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">

    <!-- Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap');
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }
        .animate-in { animation: fadeIn 0.2s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .tag-grid { display: flex; flex-wrap: wrap; gap: 8px; }
        .pb-safe { padding-bottom: calc(8rem + env(safe-area-inset-bottom)); }
        .pt-safe { padding-top: env(safe-area-inset-top); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        const INITIAL_TAGS = ['國內消費', '海外消費', '網購', '外送', '交通', '保費', '行動支付', '超商', '電影'];
        const INITIAL_CARDS = [
            {
                id: '1',
                name: '星展 eco 永續卡',
                org: 'VISA',
                billingDay: 26, 
                rewardRate: 1.5, 
                capAmount: 50000, 
                tags: ['國內消費'],
                transactions: []
            }
        ];

        function App() {
            const [cards, setCards] = useState(() => {
                const saved = localStorage.getItem('cm_cards');
                return saved ? JSON.parse(saved) : INITIAL_CARDS;
            });
            const [globalTags, setGlobalTags] = useState(() => {
                const saved = localStorage.getItem('cm_tags');
                return saved ? JSON.parse(saved) : INITIAL_TAGS;
            });

            const [view, setView] = useState('dashboard');
            const [selectedCardId, setSelectedCardId] = useState(null);
            const [activeFilterTag, setActiveFilterTag] = useState(null);
            
            const [showToast, setShowToast] = useState(false);
            const [toastMsg, setToastMsg] = useState('');
            const [deleteCardConfirm, setDeleteCardConfirm] = useState({ show: false, cardId: null });
            const [editTxModal, setEditTxModal] = useState({ show: false, cardId: null, tx: null });
            const [newTagName, setNewTagName] = useState('');

            const [editCardForm, setEditCardForm] = useState(null);
            const [newCardForm, setNewCardForm] = useState({ 
                name: '', org: 'VISA', billingDay: 26, rewardRate: 1.0, capAmount: 10000, tags: [] 
            });

            useEffect(() => {
                localStorage.setItem('cm_cards', JSON.stringify(cards));
                localStorage.setItem('cm_tags', JSON.stringify(globalTags));
            }, [cards, globalTags]);

            useEffect(() => { if(window.lucide) lucide.createIcons(); });

            const triggerToast = (msg) => {
                setToastMsg(msg);
                setShowToast(true);
                setTimeout(() => setShowToast(false), 3000);
            };

            const getCycleStartDate = (billingDay) => {
                const today = new Date();
                let year = today.getFullYear();
                let month = today.getMonth(); 
                if (today.getDate() <= billingDay) month -= 1;
                return new Date(year, month, parseInt(billingDay) + 1);
            };

            const getCardStats = (card) => {
                if (!card) return null;
                const cycleStart = getCycleStartDate(card.billingDay);
                const currentTxs = (card.transactions || [])
                    .filter(tx => new Date(tx.date) >= cycleStart)
                    .sort((a, b) => new Date(b.date) - new Date(a.date));
                const currentSpending = currentTxs.reduce((sum, tx) => sum + tx.amount, 0);
                const progress = (currentSpending / card.capAmount) * 100;
                const balance = Math.max(0, card.capAmount - currentSpending);
                const nextBillDate = new Date(cycleStart.getFullYear(), cycleStart.getMonth() + 1, card.billingDay);
                const daysUntilBill = Math.max(0, Math.ceil((nextBillDate - new Date()) / (1000 * 60 * 60 * 24)));
                
                const historyMap = {};
                (card.transactions || []).forEach(tx => {
                    const txDate = new Date(tx.date);
                    if (txDate < cycleStart) {
                        let billYear = txDate.getFullYear();
                        let billMonth = txDate.getMonth();
                        if (txDate.getDate() > card.billingDay) {
                            billMonth += 1;
                            if (billMonth > 11) { billMonth = 0; billYear += 1; }
                        }
                        const key = `${billYear}-${(billMonth + 1).toString().padStart(2, '0')}`;
                        if (!historyMap[key]) historyMap[key] = { label: `${billYear}年${billMonth + 1}月`, total: 0, txs: [] };
                        historyMap[key].total += tx.amount;
                        historyMap[key].txs.push(tx);
                    }
                });

                const historyGroups = Object.keys(historyMap)
                    .sort((a, b) => b.localeCompare(a))
                    .map(key => ({ 
                        key, 
                        ...historyMap[key], 
                        txs: historyMap[key].txs.sort((a, b) => new Date(b.date) - new Date(a.date))
                    }));

                return { currentSpending, progress, balance, daysUntilBill, currentTxs, historyGroups };
            };

            const sortedAndFilteredCards = useMemo(() => {
                let list = [...cards];
                if (activeFilterTag) list = list.filter(card => card.tags.includes(activeFilterTag));
                return list.sort((a, b) => b.rewardRate - a.rewardRate);
            }, [cards, activeFilterTag]);

            const selectedCard = useMemo(() => cards.find(c => c.id === selectedCardId), [cards, selectedCardId]);
            const stats = useMemo(() => getCardStats(selectedCard), [selectedCard]);

            const ProgressBar = ({ progress }) => (
                <div className="w-full bg-slate-100 rounded-full h-2.5 overflow-hidden">
                    <div className={`h-full transition-all duration-700 ${progress >= 95 ? 'bg-red-500' : progress >= 80 ? 'bg-orange-400' : 'bg-blue-600'}`} style={{ width: `${Math.min(progress, 100)}%` }} />
                </div>
            );

            const TransactionItem = ({ tx, cardId }) => (
                <div className="flex justify-between items-center border-b border-slate-50 pb-3 last:border-0 last:pb-0">
                    <div className="flex items-center gap-3">
                        <div className="w-9 h-9 bg-slate-50 rounded-xl flex items-center justify-center text-slate-400">
                            <i data-lucide="shopping-bag" size="16"></i>
                        </div>
                        <div>
                            <p className="font-bold text-sm text-slate-700">{tx.note || '消費'}</p>
                            <p className="text-[10px] text-slate-400 font-medium">{tx.date}</p>
                        </div>
                    </div>
                    <div className="flex items-center gap-3">
                        <p className="font-black text-slate-800 text-sm">-${tx.amount.toLocaleString()}</p>
                        <button onClick={(e) => { e.stopPropagation(); setEditTxModal({ show: true, cardId, tx: { ...tx } }); }} className="p-1.5 text-slate-300 hover:text-blue-500 transition-colors"><i data-lucide="more-horizontal" size="16"></i></button>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen bg-slate-50 pb-safe">
                    <header className="bg-white/80 backdrop-blur-md border-b px-5 py-4 sticky top-0 z-40 flex justify-between items-center pt-safe">
                        <div className="flex items-center gap-2 cursor-pointer" onClick={() => setView('dashboard')}>
                            <div className="bg-blue-600 p-1.5 rounded-lg shadow-blue-200 shadow-lg">
                                <i data-lucide="zap" size="18" className="text-white"></i>
                            </div>
                            <h1 className="text-lg font-black tracking-tight text-slate-800 uppercase italic">Card Master</h1>
                        </div>
                        <div className="bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-tighter border border-blue-200 italic">V1.3.3</div>
                    </header>

                    <main className="max-w-md mx-auto px-4 pt-4 mb-24">
                        {view === 'dashboard' && (
                            <div className="space-y-6 animate-in">
                                <div className="tag-grid no-scrollbar overflow-x-auto pb-1">
                                    <button onClick={() => setActiveFilterTag(null)} className={`whitespace-nowrap px-4 py-2 rounded-xl text-xs font-black transition-all ${!activeFilterTag ? 'bg-slate-900 text-white shadow-md' : 'bg-white text-slate-400 border border-slate-100'}`}>全部</button>
                                    {globalTags.map(tag => (
                                        <button key={tag} onClick={() => setActiveFilterTag(tag)} className={`whitespace-nowrap px-4 py-2 rounded-xl text-xs font-black transition-all ${activeFilterTag === tag ? 'bg-blue-600 text-white shadow-md' : 'bg-white text-slate-400 border border-slate-100'}`}>#{tag}</button>
                                    ))}
                                </div>

                                <div className="flex justify-between items-end">
                                    <h2 className="text-2xl font-black text-slate-800">{activeFilterTag || '我的錢包'}</h2>
                                    <button onClick={() => setView('add_card')} className="flex items-center gap-1.5 bg-white border border-slate-200 px-4 py-2 rounded-2xl text-xs font-black text-slate-600 shadow-sm active:scale-95">
                                        <i data-lucide="plus" size="14"></i> 新增卡片
                                    </button>
                                </div>

                                <div className="grid gap-4">
                                    {sortedAndFilteredCards.map(card => {
                                        const cardStats = getCardStats(card);
                                        return (
                                            <div key={card.id} className="group bg-white rounded-[2rem] p-6 shadow-sm border border-slate-100 active:scale-[0.98] transition-all cursor-pointer" onClick={() => { setSelectedCardId(card.id); setView('detail'); }}>
                                                <div className="flex justify-between items-start mb-4">
                                                    <div className="flex-1 pr-4">
                                                        <h3 className="font-black text-lg text-slate-800 group-hover:text-blue-600 transition-colors">{card.name}</h3>
                                                        <div className="flex flex-wrap gap-1.5 mt-1">
                                                            {card.tags.map(t => <span key={t} className="text-[10px] px-2 py-0.5 rounded-lg bg-blue-50 text-blue-500 font-bold">#{t}</span>)}
                                                        </div>
                                                    </div>
                                                    <div className="bg-blue-600 text-white px-3 py-2 rounded-2xl text-center min-w-[64px] shadow-lg shadow-blue-100">
                                                        <p className="text-[9px] font-black opacity-80 mb-1 italic leading-none">REWARD</p>
                                                        <p className="text-xl font-black leading-none">{card.rewardRate}%</p>
                                                    </div>
                                                </div>
                                                <ProgressBar progress={cardStats.progress} />
                                                <div className="flex justify-between items-center text-[10px] font-black mt-3">
                                                    <span className="text-slate-400">可用餘額: <span className="text-slate-700">${cardStats.balance.toLocaleString()}</span></span>
                                                    <span className="text-blue-600 italic">{cardStats.daysUntilBill} Days Left</span>
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        )}

                        {view === 'detail' && selectedCard && stats && (
                            <div className="space-y-6 animate-in">
                                <div className="flex justify-between">
                                    <button onClick={() => setView('dashboard')} className="flex items-center gap-1 text-slate-400 font-bold text-sm py-2">
                                        <i data-lucide="chevron-left" size="20"></i>返回
                                    </button>
                                    <button onClick={() => { setEditCardForm({...selectedCard}); setView('edit_card'); }} className="text-slate-400 p-2 bg-white rounded-xl border border-slate-100 shadow-sm"><i data-lucide="settings" size="18"></i></button>
                                </div>
                                <div className="bg-slate-900 rounded-[2.5rem] p-8 text-white shadow-2xl relative overflow-hidden">
                                    <h2 className="text-3xl font-black mb-5 tracking-tight">{selectedCard.name}</h2>
                                    <div className="flex flex-wrap gap-2">
                                        {selectedCard.tags.map(t => <span key={t} className="bg-white/10 px-3 py-1.5 rounded-xl text-[10px] font-black border border-white/5">#{t}</span>)}
                                    </div>
                                    <div className="absolute top-0 right-0 p-8 opacity-10"><i data-lucide="credit-card" size="80"></i></div>
                                </div>
                                {/* 數據卡片與明細邏輯同前 */}
                                <div className="bg-white p-7 rounded-[2.5rem] border border-slate-100 shadow-sm space-y-6">
                                    <div className="grid grid-cols-2 gap-6">
                                        <div className="border-r border-slate-100">
                                            <h4 className="font-black text-slate-400 text-[9px] uppercase tracking-widest mb-1">本期累計消費</h4>
                                            <p className="text-2xl font-black text-slate-800">${stats.currentSpending.toLocaleString()}</p>
                                        </div>
                                        <div className="pl-2">
                                            <h4 className="font-black text-slate-400 text-[9px] uppercase tracking-widest mb-1">本期可用餘額</h4>
                                            <p className="text-2xl font-black text-blue-600">${stats.balance.toLocaleString()}</p>
                                        </div>
                                    </div>
                                    <ProgressBar progress={stats.progress} />
                                </div>
                                <div className="space-y-4">
                                    <h3 className="text-xl font-black text-slate-800 italic px-2">本期明細</h3>
                                    <div className="bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm space-y-4">
                                        {stats.currentTxs.map(tx => <TransactionItem key={tx.id} tx={tx} cardId={selectedCard.id} />)}
                                        {stats.currentTxs.length === 0 && <p className="text-center py-4 text-slate-300 font-bold text-sm">尚無紀錄</p>}
                                    </div>
                                </div>
                            </div>
                        )}

                        {view === 'add_card' && (
                            <div className="space-y-6 animate-in">
                                <button onClick={() => setView('dashboard')} className="flex items-center gap-1 text-slate-400 font-bold text-sm py-2">
                                    <i data-lucide="chevron-left" size="20"></i>返回
                                </button>
                                <h2 className="text-3xl font-black text-slate-800">新增卡片</h2>
                                <div className="bg-white p-7 rounded-[2.5rem] border border-slate-100 shadow-sm space-y-5">
                                    <div className="space-y-2">
                                        <label className="text-[10px] font-black text-slate-400 uppercase ml-2">卡片名稱</label>
                                        <input placeholder="例如：國泰 CUBE 卡" className="w-full p-4 bg-slate-50 rounded-2xl font-bold outline-none" value={newCardForm.name} onChange={e => setNewCardForm({...newCardForm, name: e.target.value})} />
                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="space-y-2">
                                            <label className="text-[10px] font-black text-slate-400 uppercase ml-2">回饋率 (%)</label>
                                            <input type="number" step="0.1" className="w-full p-4 bg-slate-50 rounded-2xl font-bold outline-none" value={newCardForm.rewardRate} onChange={e => setNewCardForm({...newCardForm, rewardRate: parseFloat(e.target.value) || 0})} />
                                        </div>
                                        <div className="space-y-2">
                                            <label className="text-[10px] font-black text-slate-400 uppercase ml-2">封頂金額</label>
                                            <input type="number" className="w-full p-4 bg-slate-50 rounded-2xl font-bold outline-none" value={newCardForm.capAmount} onChange={e => setNewCardForm({...newCardForm, capAmount: parseInt(e.target.value) || 0})} />
                                        </div>
                                    </div>
                                    <div className="space-y-2">
                                        <label className="text-[10px] font-black text-slate-400 uppercase ml-2">結帳日</label>
                                        <select className="w-full p-4 bg-slate-50 rounded-2xl font-bold outline-none" value={newCardForm.billingDay} onChange={e => setNewCardForm({...newCardForm, billingDay: parseInt(e.target.value)})}>
                                            {[...Array(31)].map((_, i) => <option key={i+1} value={i+1}>{i+1} 號</option>)}
                                        </select>
                                    </div>
                                    <div className="tag-grid pt-2">
                                        {globalTags.map(tag => (
                                            <button key={tag} onClick={() => {
                                                const tags = newCardForm.tags.includes(tag) ? newCardForm.tags.filter(t => t !== tag) : [...newCardForm.tags, tag];
                                                setNewCardForm({...newCardForm, tags});
                                            }} className={`px-4 py-2 rounded-xl text-xs font-black border transition-all ${newCardForm.tags.includes(tag) ? 'bg-blue-600 border-blue-600 text-white shadow-md' : 'bg-white border-slate-100 text-slate-400'}`}>#{tag}</button>
                                        ))}
                                    </div>
                                    <button onClick={() => {
                                        if(!newCardForm.name) return triggerToast('請輸入名稱');
                                        setCards([...cards, { ...newCardForm, id: Date.now().toString(), transactions: [] }]);
                                        setView('dashboard');
                                        triggerToast('卡片已新增');
                                        setNewCardForm({ name: '', org: 'VISA', billingDay: 26, rewardRate: 1.0, capAmount: 10000, tags: [] });
                                    }} className="w-full py-5 bg-slate-900 text-white rounded-[2rem] font-black shadow-xl active:scale-95 transition-transform">完成新增</button>
                                </div>
                            </div>
                        )}

                        {view === 'add_tx' && (
                            <div className="space-y-6 animate-in">
                                <h2 className="text-3xl font-black text-slate-800">快速記帳</h2>
                                <form onSubmit={(e) => {
                                    e.preventDefault();
                                    const fd = new FormData(e.target);
                                    const id = fd.get('cardId');
                                    const amount = parseInt(fd.get('amount'));
                                    if (!amount) return triggerToast('請輸入金額');
                                    const newTx = { id: Date.now().toString(), amount, date: fd.get('date'), note: fd.get('note') };
                                    setCards(cards.map(c => c.id === id ? {...c, transactions: [newTx, ...(c.transactions || [])]} : c));
                                    setView('dashboard');
                                    triggerToast('已儲存消費');
                                }} className="bg-white p-7 rounded-[2.5rem] border border-slate-100 shadow-sm space-y-5">
                                    <select name="cardId" className="w-full p-4 bg-slate-50 rounded-2xl font-black outline-none border-2 border-transparent focus:border-blue-600">
                                        {cards.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}
                                    </select>
                                    <div className="grid grid-cols-2 gap-4">
                                        <input name="date" type="date" className="w-full p-4 bg-slate-50 rounded-2xl font-black outline-none" defaultValue={new Date().toISOString().split('T')[0]} required />
                                        <input name="amount" type="number" inputMode="numeric" placeholder="金額" className="w-full p-4 bg-slate-50 rounded-2xl font-black text-xl outline-none" required />
                                    </div>
                                    <input name="note" placeholder="備註 (如：午餐、交通)" className="w-full p-4 bg-slate-50 rounded-2xl font-bold outline-none" />
                                    <button type="submit" className="w-full py-5 bg-blue-600 text-white rounded-[2rem] font-black shadow-xl">確認記帳</button>
                                </form>
                            </div>
                        )}

                        {view === 'manage_tags' && (
                            <div className="space-y-6 animate-in">
                                <h2 className="text-3xl font-black text-slate-800 italic uppercase">Tag Manager</h2>
                                <div className="bg-white p-7 rounded-[2.5rem] border border-slate-100 shadow-sm space-y-6">
                                    <div className="flex gap-2">
                                        <input value={newTagName} onChange={e => setNewTagName(e.target.value)} placeholder="新標籤..." className="flex-1 p-4 bg-slate-50 rounded-2xl font-bold outline-none" />
                                        <button onClick={() => {
                                            const trimmed = newTagName.trim();
                                            if (!trimmed || globalTags.includes(trimmed)) return;
                                            setGlobalTags([...globalTags, trimmed]);
                                            setNewTagName('');
                                            triggerToast('已新增標籤');
                                        }} className="bg-blue-600 text-white w-14 rounded-2xl flex items-center justify-center"><i data-lucide="plus"></i></button>
                                    </div>
                                    <div className="tag-grid">
                                        {globalTags.map(tag => (
                                            <button key={tag} onClick={() => {
                                                if(cards.some(c => c.tags.includes(tag))) return triggerToast('標籤使用中');
                                                setGlobalTags(globalTags.filter(t => t !== tag));
                                            }} className="px-4 py-2 rounded-xl text-xs font-black border border-slate-100 text-slate-500 hover:bg-red-50 hover:text-red-500">#{tag}</button>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>

                    {/* Modals & Toasts */}
                    {showToast && <div className="fixed bottom-32 left-1/2 -translate-x-1/2 bg-slate-900 text-white px-6 py-3 rounded-2xl text-[10px] font-black z-[100] animate-in shadow-2xl tracking-widest uppercase">{toastMsg}</div>}
                    
                    {editTxModal.show && (
                        <div className="fixed inset-0 bg-slate-900/60 z-[100] flex items-center justify-center p-6 backdrop-blur-md">
                            <div className="bg-white w-full max-w-sm p-8 rounded-[3rem] space-y-6 animate-in shadow-2xl">
                                <h3 className="text-2xl font-black italic">Edit Record</h3>
                                <div className="space-y-4">
                                    <input type="date" className="w-full p-4 bg-slate-50 rounded-2xl font-black outline-none" value={editTxModal.tx.date} onChange={e => setEditTxModal({...editTxModal, tx: {...editTxModal.tx, date: e.target.value}})} />
                                    <input type="number" className="w-full p-4 bg-slate-50 rounded-2xl font-black text-xl outline-none" value={editTxModal.tx.amount} onChange={e => setEditTxModal({...editTxModal, tx: {...editTxModal.tx, amount: parseInt(e.target.value) || 0}})} />
                                    <input className="w-full p-4 bg-slate-50 rounded-2xl font-black outline-none" value={editTxModal.tx.note} onChange={e => setEditTxModal({...editTxModal, tx: {...editTxModal.tx, note: e.target.value}})} />
                                </div>
                                <div className="flex gap-2">
                                    <button onClick={() => {
                                        setCards(cards.map(c => c.id === editTxModal.cardId ? {...c, transactions: (c.transactions || []).map(t => t.id === editTxModal.tx.id ? editTxModal.tx : t)} : c));
                                        setEditTxModal({show: false}); triggerToast('已更新');
                                    }} className="flex-1 bg-blue-600 text-white py-4 rounded-2xl font-black">儲存</button>
                                    <button onClick={() => {
                                        setCards(cards.map(c => c.id === editTxModal.cardId ? {...c, transactions: (c.transactions || []).filter(t => t.id !== editTxModal.tx.id)} : c));
                                        setEditTxModal({show: false}); triggerToast('已刪除');
                                    }} className="flex-1 bg-red-50 text-red-500 py-4 rounded-2xl font-black">刪除</button>
                                </div>
                                <button onClick={() => setEditTxModal({show: false})} className="w-full text-slate-300 font-bold text-sm">關閉</button>
                            </div>
                        </div>
                    )}

                    <nav className="fixed bottom-8 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur-xl border border-slate-100 flex items-center gap-2 p-2 rounded-[2.5rem] z-50 shadow-2xl mb-safe">
                        <button onClick={() => setView('dashboard')} className={`w-14 h-14 rounded-full flex items-center justify-center transition-all ${view === 'dashboard' ? 'bg-slate-900 text-white shadow-xl' : 'text-slate-400'}`}><i data-lucide="layers"></i></button>
                        <button onClick={() => setView('add_tx')} className="w-16 h-16 bg-blue-600 text-white rounded-full flex items-center justify-center shadow-2xl active:scale-90"><i data-lucide="plus" size="28"></i></button>
                        <button onClick={() => setView('manage_tags')} className={`w-14 h-14 rounded-full flex items-center justify-center transition-all ${view === 'manage_tags' ? 'bg-slate-900 text-white shadow-xl' : 'text-slate-400'}`}><i data-lucide="hash"></i></button>
                    </nav>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('SW registered!', reg))
                    .catch(err => console.log('SW failed!', err));
            });
        }
    </script>
</body>
</html>